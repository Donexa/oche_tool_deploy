(this.webpackJsonpred_ticket=this.webpackJsonpred_ticket||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(60),s=n.n(i),o=(n(47),n(23)),l=n(4),r=n(9),d=n(35),u=Object(d.b)({name:"default",initialState:{name:"",version:0,languages:[],registers:[],provinces:[],months:[],genders:[],maritalStatus:[],dictionary:{},dhis2:{},dataSets:[],copyright:"Donexa \xa9 ".concat((new Date).getFullYear())},reducers:{continueSession:function(e,t){var n=t.payload,a=n.name,c=n.version,i=n.languages,s=n.registers,o=n.provinces,l=n.months,r=n.genders,d=n.maritalStatus,u=n.dictionary,j=n.dhis2,b=n.dataSets;e.name=null!==a&&void 0!==a?a:"",e.version=null!==c&&void 0!==c?c:0,e.languages=null!==i&&void 0!==i?i:[],e.registers=null!==s&&void 0!==s?s:[],e.provinces=null!==o&&void 0!==o?o:[],e.dictionary=null!==u&&void 0!==u?u:{},e.dhis2=null!==j&&void 0!==j?j:{},e.months=null!==l&&void 0!==l?l:[],e.genders=null!==r&&void 0!==r?r:[],e.maritalStatus=null!==d&&void 0!==d?d:[],e.dataSets=null!==b&&void 0!==b?b:[]},copyWith:function(e,t){var n,a,c,i,s,o,l,r,d,u,j;console.log(t.payload),e.name=null!==(n=t.payload.name)&&void 0!==n?n:e.name,e.version=null!==(a=t.payload.version)&&void 0!==a?a:e.version,e.languages=null!==(c=t.payload.languages)&&void 0!==c?c:e.languages,e.registers=null!==(i=t.payload.registers)&&void 0!==i?i:e.registers,e.provinces=null!==(s=t.payload.provinces)&&void 0!==s?s:e.provinces,e.months=null!==(o=t.payload.months)&&void 0!==o?o:e.months,e.genders=null!==(l=t.payload.genders)&&void 0!==l?l:e.genders,e.maritalStatus=null!==(r=t.payload.maritalStatus)&&void 0!==r?r:e.maritalStatus,e.dictionary=null!==(d=t.payload.dictionary)&&void 0!==d?d:e.dictionary,e.dhis2=null!==(u=t.payload.dhis2)&&void 0!==u?u:e.dhis2,e.dataSets=null!==(j=t.payload.dataSets)&&void 0!==j?j:e.dataSets}}}),j=u.actions,b=j.copyWith,p=j.continueSession,O=u.reducer,v=Object(d.a)({reducer:{default:O}}),h=(n(72),n.p+"static/media/oche.e0f9f9ef.png"),m=n(0);function f(){var e=Object(l.m)(),t=Object(r.c)();return Object(m.jsxs)("div",{className:"oche-main",children:[Object(m.jsxs)("div",{className:"oche-main-left",children:[Object(m.jsx)("h1",{className:"large-title",children:"OpenCarenet Community Health Edition \u2699\ufe0f"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("div",{className:"oche-main-actions",children:[Object(m.jsx)(o.b,{to:"/session",children:Object(m.jsx)("button",{children:"START NEW SESSION"})}),Object(m.jsx)("input",{id:"continue-session",type:"file",accept:"application/json",style:{display:"none"},onChange:function(n){var a=n.target.files[0];if("application/json"===a.type){var c=new window.FileReader;c.onload=function(n){console.log(JSON.parse(c.result)),t(p(JSON.parse(c.result))),e("/session")},c.readAsText(a)}}}),Object(m.jsx)("label",{className:"button-label",htmlFor:"continue-session",children:"CONTINUE SESSION"})]})]}),Object(m.jsx)("div",{className:"oche-main-right",children:Object(m.jsx)("img",{src:h,alt:"donexa logo"})})]})}var x=n(8),g=n(2),y=n(12),N=n(13),C=n(14),k=n(15),S=n(7),w=n(10),P=function(e){var t=e.currentList,n=void 0===t?[]:t;return n.length<1?{id:1}:{id:n[n.length-1].id+1}},L=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.name,"Name"),n=new FormData,console.log(t),n.append("key","pv-d/".concat(t.name)),n.append("acl","public-read"),n.append("file",t),e.next=8,fetch("https://s3.us-east-1.amazonaws.com/dpictures",{body:n,method:"POST"}).then(function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=7;break}return e.abrupt("return",Object(g.a)({headers:t.headers},n));case 7:return console.log(n),e.abrupt("return",{error:n});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),{error:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=(n(74),function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=e.child,n=e.onClose;return Object(m.jsx)("div",{className:"modal-curtain",children:Object(m.jsxs)("div",{className:"oche-modal",children:[Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("i",{className:"fa fa-xmark",onClick:function(e){e.stopPropagation(),n()}})}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("div",{className:"modal-child",children:t})]})})}}]),n}(a.Component)),D=n(5),M=n(6);function A(){var e=Object(r.d)((function(e){return e.default})).provinces,t=Object(r.c)();return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsxs)("label",{children:["Provinces and Municipalities (",e.length,")"]}),Object(m.jsx)("button",{onClick:function(n){n.stopPropagation(),t(b({provinces:[].concat(Object(D.a)(e),[P({currentList:e})])}))},children:"Add"})]}),e.map((function(n,a){return Object(m.jsxs)("div",{className:"options-inputs-row",children:[Object(m.jsxs)("p",{children:[a+1,"."]}),Object(m.jsx)(F,{prov:n,onProvChange:function(a){t(b({provinces:Object(D.a)(e.map((function(e){return e.id!==n.id?e:Object(g.a)(Object(g.a)({},n),a)})))}))}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(a){a.preventDefault(),a.stopPropagation(),t(b({provinces:e.filter((function(e){return e.id!==n.id}))}))}})]},n.id)}))]})}function F(e){var t,n,c=e.prov,i=void 0===c?{}:c,s=e.onProvChange,o=void 0===s?function(){}:s,l=Object(a.useState)(i),r=Object(M.a)(l,2),d=r[0],u=r[1];Object(a.useEffect)((function(){o(Object(g.a)(Object(g.a)({},i),d))}),[d]);var j=Object(g.a)(Object(g.a)({},i),d),b=null!==(t=null===j||void 0===j?void 0:j.municipalities)&&void 0!==t?t:[];return console.log(j),Object(m.jsxs)("form",{className:"opts-single-form prov-modal",onChange:function(e){e.preventDefault();var t=e.target,n=t.name,a=t.value;u(Object(g.a)(Object(g.a)({},d),{},Object(x.a)({},n,a)))},children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Name"}),Object(m.jsx)("input",{value:j.name,placeholder:"Province Name",name:"name"})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsxs)("label",{children:["Municipalities (",null!==(n=b.length)&&void 0!==n?n:0,")"]}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),u(Object(g.a)(Object(g.a)({},d),{},{municipalities:b.length?[].concat(Object(D.a)(b),[P({currentList:b})]):[P({currentList:[]})]}))},children:"Add"})]}),b.map((function(e,t){return Object(m.jsxs)("div",{className:"options-inputs-row",children:[Object(m.jsxs)("p",{children:[t+1,"."]}),Object(m.jsx)(T,{munis:e,onMunisChanges:function(t){console.log("minicip",Object(g.a)(Object(g.a)({},e),t));var n=Object(g.a)(Object(g.a)({},e),t);u(Object(g.a)(Object(g.a)({},d),{},{municipalities:b.map((function(e){return e.id===n.id?n:e}))}))}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(t){t.preventDefault(),t.stopPropagation(),console.log(d),u(Object(g.a)(Object(g.a)({},d),{},{municipalities:b.filter((function(t){return t.id!==(null===e||void 0===e?void 0:e.id)}))}))}})]},e.id)}))]})]})}function T(e){var t=e.munis,n=void 0===t?{}:t,a=e.onMunisChanges,c=void 0===a?function(){}:a;return Object(m.jsx)("div",{className:"munis-div",children:Object(m.jsx)("input",{value:n.name,placeholder:"Municipality Name",onChange:function(e){e.stopPropagation(),c(Object(g.a)(Object(g.a)({},n),{},{name:e.target.value}))}})})}function q(e){var t=e.title,n=void 0===t?"":t,c=e.data,i=void 0===c?Object(m.jsx)("div",{}):c,s=Object(a.useState)(!1),o=Object(M.a)(s,2),l=o[0],r=o[1];return Object(m.jsxs)("div",{className:"s-action-main",children:[Object(m.jsxs)("div",{className:"s-action-part",children:[Object(m.jsx)("p",{children:n}),Object(m.jsx)("i",{className:"fa fa-arrow-".concat(l?"up":"down"),onClick:function(e){e.stopPropagation(),r(!l)}})]}),l&&Object(m.jsx)("div",{className:"s-action-data",children:i})]})}n(75);var I=function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=e.countryName,n=e.docVersion,a=e.languages,c=e.provinces,i=e.dhis2,s=e.dispatch;return Object(m.jsxs)("div",{className:"oche-country",children:[Object(m.jsxs)("div",{className:"oche-country-editing",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Country"}),Object(m.jsx)("input",{type:"name",placeholder:"Name of the country",value:t,onChange:function(e){s(b({name:e.target.value}))}})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Document Version"}),Object(m.jsx)("input",{type:"number",placeholder:"Version Number",value:n,onChange:function(e){s(b({version:e.target.value}))}})]}),Object(m.jsx)(q,{title:"DHIS2",data:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Base URL"}),Object(m.jsx)("input",{type:"url",placeholder:"DHIS2 REST base URL",value:null===i||void 0===i?void 0:i.baseUrl,onChange:function(e){s(b({dhis2:Object(g.a)(Object(g.a)({},i),{},{baseUrl:e.target.value})}))}})]}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Username"}),Object(m.jsx)("input",{type:"name",placeholder:"Username",value:null===i||void 0===i?void 0:i.username,onChange:function(e){s(b({dhis2:Object(g.a)(Object(g.a)({},i),{},{username:e.target.value})}))}})]}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"password",placeholder:"Password",value:null===i||void 0===i?void 0:i.password,onChange:function(e){s(b({dhis2:Object(g.a)(Object(g.a)({},i),{},{password:e.target.value})}))}})]})]})}),Object(m.jsx)(q,{title:"Supported Languages",data:Object(m.jsx)(R,{})}),Object(m.jsx)(q,{title:"Entities",data:Object(m.jsx)(A,{})})]}),Object(m.jsxs)("div",{className:"oche-country-overview",children:[Object(m.jsxs)("h1",{className:"large-title",children:[t," v",n]}),Object(m.jsxs)("p",{className:"large-subtitle",children:["Supported Languages (",a.length,")"]}),a.map((function(e,t){return Object(m.jsxs)("p",{children:[t+1,". ",e.name," - ",e.code]},t)})),Object(m.jsxs)("p",{className:"large-subtitle",children:["Provinces (",c.length,")"]}),c.map((function(e,t){var n=e.municipalities,a=e.name,c=e.id;return Object(m.jsxs)("p",{children:[t+1,". ",a," (",null===n||void 0===n?void 0:n.map((function(e,t){return t===n.length-1?e.name:"".concat(e.name,", ")})),")"]},c)}))]})]})}}]),n}(a.Component),_=Object(r.b)((function(e){return{countryName:e.default.name,docVersion:e.default.version,languages:e.default.languages,provinces:e.default.provinces,genders:e.default.genders,months:e.default.months,maritalStatus:e.default.maritalStatus,dhis2:e.default.dhis2}}))(I),K=function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=e.languages,n=e.dispatch;return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsxs)("label",{children:["Supported Languages (",t.length,")"]}),Object(m.jsx)("button",{onClick:function(e){e.stopPropagation(),n(b({languages:[].concat(Object(D.a)(t),[{id:t.length+1}])}))},children:"Add"})]}),t.map((function(e,a){return Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Name"}),Object(m.jsx)("input",{type:"name",placeholder:"Name of the language",value:e.name,required:!0,onChange:function(a){n(b({languages:Object(D.a)(t).map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{name:a.target.value}):t}))}))}})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Code"}),Object(m.jsx)("input",{type:"name",placeholder:"Code of the language",value:e.code,required:!0,onChange:function(a){n(b({languages:Object(D.a)(t).map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),{},{code:a.target.value}):t}))}))}})]}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(a){a.stopPropagation(),n(b({languages:Object(D.a)(t).filter((function(t){return t.id!==e.id}))}))}})]},a)}))]})}}]),n}(a.Component),R=Object(r.b)((function(e){return{languages:e.default.languages}}))(K),U=(n(48),function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){var e,a,c,i;Object(y.a)(this,n);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(i=t.call.apply(t,[this].concat(o))).state={inputs:null!==(e=null===(a=i.props)||void 0===a||null===(c=a.reg)||void 0===c?void 0:c.inputs)&&void 0!==e?e:[]},i}return Object(N.a)(n,[{key:"componentDidUpdate",value:function(e,t){if(t!==this.state){var n=this.props.onInputsChange,a=this.state.inputs;n&&n(a)}}},{key:"render",value:function(){var e=this,t=this.state.inputs;return this.props.reg?Object(m.jsxs)("div",{className:"oche-inputs",children:[Object(m.jsxs)("div",{className:"oche-inputs-title",children:[Object(m.jsxs)("p",{className:"p-medium",children:["Form's inputs (",t.length,")"]}),Object(m.jsx)("button",{onClick:function(n){n.stopPropagation(),e.setState({inputs:[].concat(Object(D.a)(t),[P({currentList:t})])})},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),t.map((function(n,a){var c;return Object(m.jsx)(q,{title:null!==(c=null===n||void 0===n?void 0:n.key)&&void 0!==c?c:"",data:Object(m.jsxs)("div",{className:"oche-inputs-item",children:[Object(m.jsxs)("p",{children:[a+1,"."]}),Object(m.jsx)(V,{item:n,onChangeF:function(n){console.log("Coming input",n),e.setState({inputs:t.map((function(e){return e.id!==n.id?e:Object(g.a)(Object(g.a)({},e),n)}))})}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(a){a.stopPropagation(),e.setState({inputs:t.filter((function(e){return e.id!==n.id}))})}})]})},n.id)}))]}):Object(m.jsx)(m.Fragment,{})}}]),n}(a.Component));function V(e){var t,n,c=e.item,i=void 0===c?{}:c,s=e.onChangeF,o=void 0===s?function(){}:s,l=Object(r.d)((function(e){return e.default})),d=l.languages,u=l.genders,j=Object(a.useState)(null),b=Object(M.a)(j,2),p=b[0],O=b[1];return Object(m.jsxs)("div",{className:"single-oche-input",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Input Label"}),Object(D.a)(d).map((function(e,t){var n="inputLabel_".concat(e.code);return Object(m.jsx)("input",{name:n,placeholder:"Input label (".concat(e.name,")"),type:"name",value:i["inputLabel_".concat(e.code)],onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},Object(x.a)({},n,e.target.value)))}},t)}))]}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Key"}),Object(m.jsx)("input",{name:"key",type:"text",placeholder:"Input Key",value:i.key,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{key:e.target.value}))}})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Type"}),Object(m.jsxs)("select",{name:"type",value:i.type,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{type:e.target.value}))},children:[Object(m.jsx)("option",{value:null,children:"Type"}),Object(m.jsx)("option",{value:"text",children:"Text"}),Object(m.jsx)("option",{value:"number",children:"Number"}),Object(m.jsx)("option",{value:"bool",children:"Boolean"}),Object(m.jsx)("option",{value:"select",children:"Select"}),Object(m.jsx)("option",{value:"multi-select",children:"Multi Select"}),Object(m.jsx)("option",{value:"multi-input",children:"Multi Input"})]})]})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Is required"}),Object(m.jsxs)("select",{name:"isRequired",value:i.isRequired,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{isRequired:e.target.value}))},children:[Object(m.jsx)("option",{value:null,children:"Choose"}),Object(m.jsx)("option",{value:!0,children:"Yes"}),Object(m.jsx)("option",{value:!1,children:"No"})]})]}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Min age"}),Object(m.jsx)("input",{name:"minAge",type:"number",placeholder:"Min age",value:i.minAge,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{minAge:e.target.value}))}})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Max age"}),Object(m.jsx)("input",{name:"maxAge",type:"number",placeholder:"Max age",value:i.maxAge,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{maxAge:e.target.value}))}})]})]}),Object(m.jsx)("div",{className:"oche-languages-form",children:Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Age Type"}),Object(m.jsxs)("select",{name:"ageType",value:i.ageType,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{ageType:e.target.value}))},children:[Object(m.jsx)("option",{children:"Choose"}),Object(m.jsx)("option",{value:"year",children:"Year"}),Object(m.jsx)("option",{value:"month",children:"Months"}),Object(m.jsx)("option",{value:"days",children:"Days"})]})]})}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),O(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),d.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),p?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Gender"}),Object(m.jsxs)("select",{name:"gender",value:i.gender,onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},i),{},{gender:e.target.value}))},children:[Object(m.jsx)("option",{children:"Choose"}),Object(D.a)(u).map((function(e,t){var n;return Object(m.jsx)("option",{value:e.id,children:null!==(n=e[p])&&void 0!==n?n:""})}))]})]}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsx)(q,{title:"Options",data:Object(m.jsx)(G,{dOptions:null!==(t=null===i||void 0===i?void 0:i.options)&&void 0!==t?t:[],onChangeOf:function(e){o(Object(g.a)(Object(g.a)({},i),{},{options:e}))}})}),Object(m.jsx)(q,{title:"Additional Inputs",data:Object(m.jsx)(Q,{dInputs:null!==(n=null===i||void 0===i?void 0:i.inputs)&&void 0!==n?n:[],onChangeOf:function(e){o(Object(g.a)(Object(g.a)({},i),{},{inputs:e}))}})})]})}function G(e){var t=e.onChangeOf,n=void 0===t?function(){}:t,a=e.dOptions,c=void 0===a?[]:a;return Object(m.jsxs)("div",{className:"options-reg",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsx)("label",{children:"Options"}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),n([].concat(Object(D.a)(c),[P({currentList:c})]))},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),c.map((function(e,t){var a;return Object(m.jsx)(q,{title:null!==(a=null===e||void 0===e?void 0:e.value)&&void 0!==a?a:"",data:Object(m.jsxs)("div",{className:"options-inputs-row",children:[Object(m.jsxs)("p",{children:[t+1,"."]}),Object(m.jsx)(H,{item:e,onChangeWith:function(t){n(Object(D.a)(c.map((function(n){return n.id!==e.id?n:Object(g.a)(Object(g.a)({},n),t)}))))}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(t){t.stopPropagation(),n(Object(D.a)(c.filter((function(t){return t.id!==e.id}))))}})]})},t)}))]})}function H(e){var t=e.item,n=void 0===t?{}:t,a=e.onChangeWith,c=void 0===a?function(){}:a,i=Object(r.d)((function(e){return e.default})),s=i.languages,o=i.genders;return Object(m.jsxs)("form",{className:"opts-single-form",onChange:function(e){e.preventDefault(),e.stopPropagation();var t=e.target,a=t.name,i=t.value;c(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},a,i)))},children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Option Label"}),Object(D.a)(s).map((function(e,t){return Object(m.jsx)("input",{name:"optionLabel_".concat(e.code),placeholder:"Option label (".concat(e.name,")"),type:"name",value:n["optionLabel_".concat(e.code)]},t)}))]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Value"}),Object(m.jsx)("input",{type:"name",name:"value",placeholder:"Value",value:n.value})]}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Min age"}),Object(m.jsx)("input",{name:"minAge",type:"number",placeholder:"Min age",value:n.minAge})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Max age"}),Object(m.jsx)("input",{name:"maxAge",type:"number",placeholder:"Max age",value:n.maxAge})]})]}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Age Type"}),Object(m.jsxs)("select",{name:"ageType",value:n.ageType,children:[Object(m.jsx)("option",{children:"Choose"}),Object(m.jsx)("option",{value:"year",children:"Year"}),Object(m.jsx)("option",{value:"month",children:"Months"}),Object(m.jsx)("option",{value:"days",children:"Days"})]})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Gender"}),Object(m.jsxs)("select",{name:"gender",value:n.gender,children:[Object(m.jsx)("option",{children:"Choose"}),Object(D.a)(o).map((function(e,t){var n;return Object(m.jsx)("option",{value:e.id,children:null!==(n=null===e||void 0===e?void 0:e.fr)&&void 0!==n?n:""})}))]})]})]})]})}function Q(e){var t=e.onChangeOf,n=void 0===t?function(){}:t,a=e.dInputs,c=void 0===a?[]:a;return Object(m.jsxs)("div",{className:"oche-inputsr for-inputs",children:[Object(m.jsxs)("div",{className:"oche-inputs-title",children:[Object(m.jsxs)("p",{className:"p-medium",children:["Additional Inputs (",c.length,")"]}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),n([].concat(Object(D.a)(c),[P({currentList:c})]))},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),c.map((function(e,t){var a;return Object(m.jsx)(q,{title:null!==(a=null===e||void 0===e?void 0:e.key)&&void 0!==a?a:"",data:Object(m.jsxs)("div",{className:"oche-inputs-item",children:[Object(m.jsxs)("p",{children:[t+1,"."]}),Object(m.jsx)(V,{item:e,onChangeF:function(t){n(Object(D.a)(c.map((function(n){return n.id!==e.id?n:Object(g.a)(Object(g.a)({},n),t)}))))}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(t){t.stopPropagation(),n(Object(D.a)(c.filter((function(t){return t.id!==e.id}))))}})]})},e.id)}))]})}n(76);var B=n(62),W=n.n(B),Y=(n(150),function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={formValues:{}},e.handleSubmit=function(t){var n,a=e.props,c=a.registers,i=a.dispatch,s=e.state.formValues,o=!(null===s||void 0===s||!s.id);t.preventDefault(),console.log(e.state.formValues),i(b(o?{registers:Object(D.a)(c).map((function(e){return e.id!==s.id?e:Object(g.a)(Object(g.a)({},e),s)}))}:{registers:[].concat(Object(D.a)(c),[Object(g.a)(Object(g.a)(Object(g.a)({},P({currentList:c})),e.state.formValues),{},{inputs:[]})])})),null===(n=window.document.querySelector("#reg-form"))||void 0===n||n.reset()},e.handleChange=function(t){t.preventDefault();var n=t.target,a=n.name,c=n.value;e.setState({formValues:Object(g.a)(Object(g.a)({},e.state.formValues),{},Object(x.a)({},a,c))})},e._inputs=[{name:"Name",multiLang:!0,type:"name",ipName:"name"},{name:"Description",multiLang:!0,type:"textarea",ipName:"description"},{name:"Code",multiLang:!1,type:"name",ipName:"code"},{name:"Does it require a patient ?",multiLang:!1,type:"select",options:[{name:"Yes",value:!0},{name:"No",value:!1}],ipName:"isLinked"},{name:"Patient Age Min",multiLang:!1,type:"number",ipName:"min-age"},{name:"Patient Age Max",multiLang:!1,type:"number",ipName:"max-age"},{name:"Guide",multiLang:!0,type:"richtext",ipName:"guide"},{name:"Tutorial",multiLang:!0,type:"url",ipName:"tutorial"}],e}return Object(N.a)(n,[{key:"render",value:function(){var e=this,t=this.props.languages,n=this.state.formValues,a=!(null===n||void 0===n||!n.id);return Object(m.jsxs)("div",{className:"oche-registers",children:[Object(m.jsx)(z,{canDelete:!0,onTap:function(t){e.setState({formValues:Object(g.a)({},t)})}}),Object(m.jsxs)("form",{id:"reg-form",className:"oche-registers-form",onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(m.jsxs)("p",{className:"p-medium",children:[a?"Update":"Create"," register"]}),Object(m.jsx)("div",{className:"divider"}),this._inputs.map((function(a,c){return!1===a.multiLang?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:a.name}),e._getInputFor(a,n)]}):Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:a.name}),t.map((function(t,c){return e._getInputFor(Object(g.a)(Object(g.a)({},a),{},{name:"".concat(a.name,"  in ").concat(t.name),ipName:"".concat(a.ipName,"_").concat(t.code)}),n)}))]})})),Object(m.jsx)("button",{children:"Add"})]})]})}},{key:"_getInputFor",value:function(e,t){var n,a,c,i,s,o=this;if(!Object.keys(e).length)return Object(m.jsx)(m.Fragment,{});switch(e.type){case"select":return Object(m.jsxs)("select",{name:e.ipName,required:!0,value:null!==(n=t[e.ipName])&&void 0!==n?n:void 0,children:[Object(m.jsx)("option",{value:null,children:e.name}),null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.map((function(e,t){return Object(m.jsx)("option",{value:e.value,children:e.name},t)}))]});case"richtext":return Object(m.jsx)(X,{onChange:function(t){o.setState({formValues:Object(g.a)(Object(g.a)({},o.state.formValues),{},Object(x.a)({},e.ipName,t))})},name:e.ipName,theme:"snow",dFault:null!==(c=t[e.ipName])&&void 0!==c?c:void 0,required:!0,placeholder:e.name});case"textarea":return Object(m.jsx)("textarea",{name:e.ipName,placeholder:e.name,required:!0,value:null!==(i=t[e.ipName])&&void 0!==i?i:void 0});default:return Object(m.jsx)("input",{name:e.ipName,placeholder:e.name,required:!0,value:null!==(s=t[e.ipName])&&void 0!==s?s:void 0})}}}]),n}(a.Component)),J=Object(r.b)((function(e){return{countryName:e.default.name,docVersion:e.default.version,languages:e.default.languages,registers:e.default.registers}}))(Y);function z(e){var t=e.onTap,n=void 0===t?function(){}:t,a=e.canDelete,c=void 0!==a&&a,i=Object(r.d)((function(e){return e.default})).registers,s=Object(r.c)();return Object(m.jsxs)("div",{className:"oche-registers-list",children:[Object(m.jsxs)("p",{className:"p-medium",children:["Registers (",i.length,")"]}),Object(m.jsx)("div",{className:"divider"}),i.map((function(e){var t="true"===e.isLinked?"With patient":"Without patient",a="true"===e.isLinked?"bg-green":"bg-orange";return Object(m.jsxs)("div",{className:"single-register",onClick:function(t){t.stopPropagation(),n(e)},children:[Object(m.jsxs)("div",{className:"flex-row",children:[Object(m.jsx)("p",{className:"p-medium",children:e.code}),c?Object(m.jsx)("i",{className:"fa fa-xmark",onClick:function(t){t.stopPropagation(),s(b({registers:Object(D.a)(i).filter((function(t){return t.id!==e.id}))}))}}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsx)("p",{id:"p-bg",className:a,children:t})]},e.id)}))]})}function X(e){var t=e.placeholder,n=void 0===t?"":t,c=e.dFault,i=void 0===c?"":c,s=e.onChange,o=void 0===s?function(){}:s,l=Object(a.useState)(i),r=Object(M.a)(l,2),d=r[0],u=r[1];return Object(a.useEffect)((function(){u(i)}),[i]),Object(m.jsx)(W.a,{id:"react-quiller",theme:"snow",value:d,onChange:function(e){u(e),o(e)},placeholder:n})}n(151);var Z=function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={currentReg:null},e}return Object(N.a)(n,[{key:"render",value:function(){var e=this,t=this.state.currentReg,n=this.props,a=n.registers,c=n.dispatch;return Object(m.jsxs)("div",{className:"oche-form",children:[Object(m.jsx)(z,{onTap:function(t){e.setState({currentReg:Object(g.a)({},t)})}}),Object(m.jsx)(U,{reg:t,onInputsChange:function(e){c(b({registers:Object(D.a)(a).map((function(n){return n.id!==(null===t||void 0===t?void 0:t.id)?n:Object(g.a)(Object(g.a)({},t),{},{inputs:e})}))}))}},null===t||void 0===t?void 0:t.code)]})}}]),n}(a.Component),$=Object(r.b)((function(e){return{registers:e.default.registers}}))(Z);function ee(e){var t=e.list,n=void 0===t?[]:t,c=e.title,i=void 0===c?"":c,s=e.onLChange,o=void 0===s?function(){}:s,l=Object(a.useState)([]),d=Object(M.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){j(n)}),[n]);var b=Object(r.d)((function(e){return e.default})).languages;return Object(m.jsxs)("div",{className:"oche-simple-utils",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsxs)("p",{className:"p-medium",children:[i,"(",u.length,")"]}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation();var t=[].concat(Object(D.a)(u),[P({currentList:u})]);j(t),o(t)},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),u.map((function(e,t){return Object(m.jsxs)("div",{className:"options-inputs-row",children:[Object(m.jsxs)("p",{children:[t+1,"."]}),Object(m.jsx)("form",{className:"oche-simple-utils-inputs",onChange:function(t){t.stopPropagation();var n=t.target,a=n.name,c=n.value,i=u.map((function(t){return t.id!==e.id?t:Object(g.a)(Object(g.a)({},t),{},Object(x.a)({},a,c))}));j(i),o(i)},children:b.map((function(t,n){return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:t.name}),Object(m.jsx)("input",{name:t.code,type:"text",placeholder:"In ".concat(t.name),value:e["".concat(t.code)]})]},t.id)}))}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(t){t.preventDefault(),t.stopPropagation();var n=u.filter((function(t){return t.id!==e.id}));j(n),o(n)}})]},e.id)}))]})}var te=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var n,a,c,i,s,o,l,r,d,u,j,b,p;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,a=void 0===n?null:n,c=t.method,i=void 0===c?"POST":c,s=t.baseUrl,o=void 0===s?"":s,l=t.endPoint,r=void 0===l?"":l,d=t.headers,u=void 0===d?{}:d,j=t.needHeaders,b=void 0!==j&&j,p=t.mode,void 0===p?void 0:p,e.next=3,fetch("".concat(o,"/").concat(r),{method:i,body:a,headers:Object(g.a)({"Content-Type":"application/json"},u)}).then(function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=7;break}return e.abrupt("return",b?Object(g.a)({headers:t.headers},n):n);case 7:return e.abrupt("return",{error:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return{error:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n(152);function ne(){var e=Object(r.d)((function(e){return e.default})),t=e.dictionary,n=e.languages,c=e.genders,i=e.maritalStatus,s=e.months,o=Object(r.c)(),l=Object(a.useState)([]),d=Object(M.a)(l,2),u=d[0],j=d[1],p=Object(a.useState)(!0),O=Object(M.a)(p,2),v=O[0],h=O[1];return Object(a.useEffect)((function(){te({endPoint:"pv-d/OpenCarenet-Locales-Keys.json",method:"GET",baseUrl:"https://dpictures.s3.amazonaws.com"}).then((function(e){console.log(e),h(!1),e.error?j([]):j(e.keys)}))}),[u.length]),v?Object(m.jsx)("div",{className:"center",children:"Rindira gato..."}):Object(m.jsxs)("div",{className:"oche-languages",children:[Object(m.jsxs)("div",{className:"oche-languages-dic",children:[Object(m.jsxs)("div",{className:"oche-inputs-title",children:[Object(m.jsx)("p",{className:"p-medium",children:"Dictionary of Words"}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),u.map((function(e){return Object(m.jsx)(q,{title:e,data:Object(m.jsx)("div",{className:"input-labeled",children:Object(D.a)(n).map((function(n,a){var c,i=null!==(c=t[e])&&void 0!==c?c:{};return Object(m.jsx)("input",{name:n.code,placeholder:"".concat(e," in (").concat(n.name,")"),type:"text",value:i["".concat(n.code)],onChange:function(a){a.stopPropagation(),o(b({dictionary:Object(g.a)(Object(g.a)({},t),{},Object(x.a)({},e,Object(g.a)(Object(g.a)({},t[e]),{},Object(x.a)({},n.code,a.target.value))))}))}},a)}))})},e)}))]}),Object(m.jsxs)("div",{className:"language-utils",children:[Object(m.jsx)(ae,{keys:u,onNewKey:function(e){j([].concat(Object(D.a)(u),[e]))}}),Object(m.jsx)(q,{title:"Genders",data:Object(m.jsx)(ee,{title:"Genders",list:c,onLChange:function(e){o(b({genders:e}))}})}),Object(m.jsx)(q,{title:"Marital Status",data:Object(m.jsx)(ee,{title:"Marital Status",list:i,onLChange:function(e){o(b({maritalStatus:e}))}})}),Object(m.jsx)(q,{title:"Year Months",data:Object(m.jsx)(ee,{title:"Year Months",list:s,onLChange:function(e){o(b({months:e}))}})})]})]})}function ae(e){var t=e.onNewKey,n=void 0===t?function(){}:t,c=e.keys,i=void 0===c?[]:c,s=Object(a.useState)(null),o=Object(M.a)(s,2),l=o[0],r=o[1],d=Object(a.useState)(!1),u=Object(M.a)(d,2),j=u[0],b=u[1];return Object(m.jsxs)("form",{id:"new-key-form-ref",className:"new-key-form",onSubmit:function(e){e.preventDefault(),b(!0);var t={keys:[].concat(Object(D.a)(i),[l])},a=JSON.stringify(t,null,2),c=new Blob([a],{type:"application/json"});c.name="OpenCarenet-Locales-Keys.json",c.lastModified=new Date,L(new File([c],c.name,{type:c.type})).then((function(e){var t,a;b(!1),n(l),null===(t=document)||void 0===t||null===(a=t.getElementById("new-key-form-ref"))||void 0===a||a.reset()}))},children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Add new key to dictionary"}),Object(m.jsx)("input",{name:"key",placeholder:"key",type:"text",required:!0,onChange:function(e){e.stopPropagation(),r(e.target.value)}})]}),Object(m.jsx)("button",{className:j&&"button-loading",children:j?"Rindira gato...":"Add key"})]})}var ce=n.p+"static/media/dhis2.10ddf75e.png";n(153);function ie(){return Object(m.jsxs)("div",{className:"oche-dhis2",children:[Object(m.jsx)(le,{}),Object(m.jsx)(le,{displayOnly:!0})]})}function se(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(w.a)(Object(S.a)().mark((function e(t){var n,a,c,i,s,o;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=void 0===n?"":n,c=t.usrn,i=void 0===c?"":c,s=t.pwd,o=void 0===s?"":s,"dataSets?paging=false&fields=id,name,shortName,version,periodType,created",e.next=4,te({baseUrl:a,endPoint:"dataSets?paging=false&fields=id,name,shortName,version,periodType,created",method:"GET",mode:"no-cors",headers:{Authorization:"Basic ".concat(window.btoa("".concat(i,":").concat(o)))}}).then((function(e){return e.error?[]:e.dataSets}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){e.onTap;var t=e.displayOnly,n=void 0!==t&&t,c=Object(r.d)((function(e){return e.default})),i=c.dhis2,s=c.dataSets,o=null!==i&&void 0!==i?i:{},l=o.baseUrl,d=o.username,u=o.password,j=Object(a.useState)([]),p=Object(M.a)(j,2),O=p[0],v=p[1],h=Object(a.useState)(!1),f=Object(M.a)(h,2),x=f[0],g=f[1],y=Object(a.useState)(""),N=Object(M.a)(y,2),C=N[0],k=N[1],S=Object(r.c)();Object(a.useEffect)((function(){n||(g(!0),se({url:l,usrn:d,pwd:u}).then((function(e){g(!1),v(e)})))}),[l,d,u,n]);var w=(n?s:O).filter((function(e){return String(e.name).toLowerCase().includes(String(C).toLowerCase())}));return w.sort((function(e,t){return e.name.localeCompare(t.name)})),Object(m.jsxs)("div",{className:"oche_dataSets",children:[Object(m.jsxs)("div",{className:"o-d-header",children:[Object(m.jsxs)("p",{children:[n?"Supported":"DHIS2"," Datasets (",w.length,")"]}),n?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)("i",{className:"fa fa-refresh ".concat(x?"fa-spin":""),onClick:function(e){n||(g(!0),se({url:l,usrn:d,pwd:u}).then((function(e){if(g(!1),v(e),e.length){for(var t=Object(D.a)(s),n=function(){var e=s[a];console.log(a,e),O.find((function(t){return t.id===e.id}))||(t=Object(D.a)(t).filter((function(t){return t.id!==e.id})))},a=0;a<s.length;a++)n();S(b({dataSets:t}))}})))}})]}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("input",{placeholder:"Filter by name",onChange:function(e){var t=e.target.value;k(t)}}),Object(m.jsx)("div",{className:"s-dataset-list",children:w.map((function(e,t){var n=e.id,a=e.name,c=e.version,i=e.periodType,o=e.created,l=s.filter((function(t){return t.id===e.id})).length;return Object(m.jsxs)("div",{className:"s-dataset",children:[Object(m.jsx)("span",{className:l?"s-d-l-active":"",onClick:function(t){t.stopPropagation(),S(b(l?{dataSets:s.filter((function(t){return t.id!==e.id}))}:{dataSets:[].concat(Object(D.a)(s),[e])}))}}),Object(m.jsxs)("div",{className:"s-d-body",children:[Object(m.jsx)("p",{children:String(a).trim()}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("p",{children:["v",c," - ",i]}),Object(m.jsxs)("p",{children:["Created : ",new Date(o).toLocaleDateString()]})]})]},n)}))})]})}n(154);function re(e){var t=e.form,n=void 0===t?{}:t,c=Object(r.d)((function(e){return e.default})),i=c.languages,s=c.genders,o=Object(a.useState)(null),l=Object(M.a)(o,2),d=l[0],u=l[1];return Object(m.jsx)("div",{className:"aggregation-form",children:Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),u(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),i.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),d?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Gender"}),Object(m.jsxs)("select",{name:"gender",value:n.gender,children:[Object(m.jsx)("option",{children:"Choose"}),Object(D.a)(s).map((function(e,t){var n;return Object(m.jsx)("option",{value:e.id,children:null!==(n=e[d])&&void 0!==n?n:""})}))]})]}):Object(m.jsx)(m.Fragment,{})]})})}function de(e){var t=e.form,n=void 0===t?{}:t;return Object(m.jsxs)("div",{className:"aggregation-form",children:[Object(m.jsx)("div",{className:"oche-languages-form",children:Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Age Type"}),Object(m.jsxs)("select",{name:"ageType",value:n.ageType,children:[Object(m.jsx)("option",{children:"Choose"}),Object(m.jsx)("option",{value:"year",children:"Year"}),Object(m.jsx)("option",{value:"month",children:"Month"}),Object(m.jsx)("option",{value:"days",children:"Days"})]})]})}),Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Min age"}),Object(m.jsx)("input",{name:"minAge",type:"number",placeholder:"Min age",value:n.minAge})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Max age"}),Object(m.jsx)("input",{name:"maxAge",type:"number",placeholder:"Max age",value:n.maxAge})]})]})]})}function ue(e){var t,n,c,i=e.form,s=void 0===i?{}:i,o=e.dataElement,l=void 0===o?{}:o,d=Object(r.d)((function(e){return e.default})),u=d.languages,j=d.registers,b=Object(a.useState)(null),p=Object(M.a)(b,2),O=p[0],v=p[1],h=j.find((function(e){return e.code===l.register})),f=Object(a.useState)(null===h||void 0===h||null===(t=h.inputs)||void 0===t?void 0:t.find((function(e){return e.key===(null===s||void 0===s?void 0:s.questionKey)}))),x=Object(M.a)(f,2),g=x[0],y=x[1];return Object(m.jsxs)("div",{className:"aggregation-form",children:[Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),v(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),u.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),O&&h?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Question"}),Object(m.jsxs)("select",{name:"questionKey",value:s.questionKey,placeholder:"Question",onChange:function(e){var t;y(null===h||void 0===h||null===(t=h.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value})))},children:[Object(m.jsx)("option",{children:"Choose"}),null===h||void 0===h||null===(n=h.inputs)||void 0===n?void 0:n.filter((function(e){return"select"===e.type||"multi-select"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(O)]},e.key)}))]})]}):Object(m.jsx)(m.Fragment,{})]}),O&&h&&g?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Option"}),Object(m.jsxs)("select",{name:"optionValue",value:s.optionValue,placeholder:"Option",children:[Object(m.jsx)("option",{children:"Choose"}),null===g||void 0===g||null===(c=g.options)||void 0===c?void 0:c.map((function(e){return Object(m.jsx)("option",{value:e.value,children:e["optionLabel_".concat(O)]},e.value)}))]})]}):Object(m.jsx)(m.Fragment,{})]})}function je(e){var t,n,c=e.form,i=void 0===c?{}:c,s=e.dataElement,o=void 0===s?{}:s,l=Object(r.d)((function(e){return e.default})),d=l.languages,u=l.registers,j=Object(a.useState)(null),b=Object(M.a)(j,2),p=b[0],O=b[1],v=u.find((function(e){return e.code===o.register})),h=Object(a.useState)(null===v||void 0===v||null===(t=v.inputs)||void 0===t?void 0:t.find((function(e){return e.key===(null===i||void 0===i?void 0:i.questionKey)}))),f=Object(M.a)(h,2),x=f[0],g=f[1];return Object(m.jsxs)("div",{className:"aggregation-form",children:[Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),O(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),d.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),p&&v?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Question"}),Object(m.jsxs)("select",{name:"questionKey",value:i.questionKey,placeholder:"Question",onChange:function(e){var t;g(null===v||void 0===v||null===(t=v.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value})))},children:[Object(m.jsx)("option",{children:"Choose"}),null===v||void 0===v||null===(n=v.inputs)||void 0===n?void 0:n.filter((function(e){return"select"!==e.type})).filter((function(e){return"multi-select"!==e.type})).filter((function(e){return"multi-input"!==e.type})).map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(p)]},e.key)}))]})]}):Object(m.jsx)(m.Fragment,{})]}),p&&v&&x?Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Data type"}),Object(m.jsx)("input",{className:"input-disable",type:"text",placeholder:"DataElement",value:x.type})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Parsable answer"}),Object(m.jsx)("input",{name:"answer",value:i.answer})]})]}):Object(m.jsx)(m.Fragment,{})]})}function be(e){var t,n=e.form,c=void 0===n?{}:n,i=e.dataElement,s=void 0===i?{}:i,o=Object(r.d)((function(e){return e.default})),l=o.languages,d=o.registers,u=Object(a.useState)(null),j=Object(M.a)(u,2),b=j[0],p=j[1],O=d.find((function(e){return e.code===s.register}));return Object(m.jsx)("div",{className:"aggregation-form",children:Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),p(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),l.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),b&&O?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Question"}),Object(m.jsxs)("select",{name:"questionKey",value:c.questionKey,placeholder:"Question",children:[Object(m.jsx)("option",{children:"Choose"}),null===O||void 0===O||null===(t=O.inputs)||void 0===t?void 0:t.filter((function(e){return"number"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(b)]},e.key)}))]})]}):Object(m.jsx)(m.Fragment,{})]})})}function pe(e){var t,n,c,i,s,o=e.form,l=void 0===o?{}:o,d=e.dataElement,u=void 0===d?{}:d,j=e.onChange,b=void 0===j?function(){}:j,p=Object(r.d)((function(e){return e.default})),O=p.languages,v=p.registers,h=Object(a.useState)(null),f=Object(M.a)(h,2),x=f[0],y=f[1],N=v.find((function(e){return e.code===u.register})),C=Object(a.useState)(null===N||void 0===N||null===(t=N.inputs)||void 0===t?void 0:t.find((function(e){return e.key===(null===l||void 0===l?void 0:l.questionKey)}))),k=Object(M.a)(C,2),S=k[0],w=k[1];return Object(m.jsxs)("div",{className:"aggregation-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),y(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),O.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),x&&N?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsxs)("label",{children:["Path ",null!==l&&void 0!==l&&null!==(n=l.path)&&void 0!==n&&n.path?"(".concat(null===l||void 0===l||null===(c=l.path)||void 0===c?void 0:c.path,")"):""]}),Object(m.jsxs)("select",{name:"questionKey",value:l.questionKey,placeholder:"Path",onChange:function(e){var t;w(null===N||void 0===N||null===(t=N.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value}))),b(Object(g.a)(Object(g.a)({},l),{},{questionKey:e.target.value}))},children:[Object(m.jsx)("option",{children:"Choose"}),null===N||void 0===N||null===(i=N.inputs)||void 0===i?void 0:i.filter((function(e){return"multi-input"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(x)]},e.key)}))]})]}):Object(m.jsx)(m.Fragment,{}),S&&x&&N?Object(m.jsx)(Oe,{input:S,locale:x,path:null===l||void 0===l||null===(s=l.path)||void 0===s?void 0:s.obj[S.key],onNewInput:function(e){b(Object(g.a)(Object(g.a)({},l),{},{path:e}))}}):Object(m.jsx)(m.Fragment,{})]})}function Oe(e){var t,n,c,i=e.input,s=void 0===i?{}:i,o=e.locale,l=void 0===o?"":o,r=e.onNewInput,d=void 0===r?function(){}:r,u=e.path,j=void 0===u?{}:u,b=Object.keys(null!==j&&void 0!==j?j:{}).length?Object.keys(j)[0]:null,p=Object(a.useState)(null===s||void 0===s||null===(t=s.inputs)||void 0===t?void 0:t.find((function(e){return e.key===b}))),O=Object(M.a)(p,2),v=O[0],h=O[1];return Object(m.jsxs)("div",{className:"lookup-div",children:[Object(m.jsx)("div",{className:"input-labeled",children:Object(m.jsxs)("select",{name:"questionKey",value:b,placeholder:"Question",onChange:function(e){var t;e.stopPropagation();var n=null===s||void 0===s||null===(t=s.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value}));n&&(h(n),d({path:"".concat(s.key,"->").concat(n.key),obj:Object(x.a)({},s.key,Object(x.a)({},n.key,null))}))},children:[Object(m.jsx)("option",{children:"Choose"}),null===s||void 0===s||null===(n=s.inputs)||void 0===n?void 0:n.map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(l)]},e.key)}))]})}),"multi-input"===(null===v||void 0===v?void 0:v.type)?Object(m.jsx)(Oe,{input:v,locale:l,path:j[v.key],onNewInput:function(e){d({path:"".concat(s.key,"->").concat(e.path),obj:Object(x.a)({},s.key,e.obj)})}}):Object(m.jsx)(ve,{question:v,locale:l,condition:v&&null!==(c=j[null===v||void 0===v?void 0:v.key])&&void 0!==c?c:{},onChange:function(e){d({path:"".concat(s.key,"->").concat(v.key),obj:Object(g.a)({},e)})}})]})}function ve(e){var t=e.question,n=void 0===t?{}:t,a=e.locale,c=e.condition,i=void 0===c?{}:c,s=e.onChange,o=void 0===s?function(){}:s;return Object(m.jsxs)("div",{className:"aggregationconfig",children:[Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Question"}),Object(m.jsx)("input",{className:"input-disable",type:"text",placeholder:"DataElement",value:n["inputLabel_".concat(a)]})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Type"}),Object(m.jsx)("input",{className:"input-disable",type:"text",placeholder:"Type",value:n.type})]})]}),Object(m.jsx)("div",{className:"input-labeled",children:Object(m.jsx)(he,{question:n,type:n.type,locale:a,form:null!==i&&void 0!==i?i:{},onChange:function(e){o(Object(g.a)(Object(g.a)({},i),e))}})})]})}function he(e){var t=e.question,n=void 0===t?{}:t,a=e.locale,c=void 0===a?"":a,i=e.type,s=void 0===i?void 0:i,o=e.form,l=void 0===o?{}:o,r=e.onChange,d=void 0===r?function(){}:r;return Object(m.jsx)("form",{onChange:function(e){var t=e.target,n=t.name,a=t.value;d(Object(g.a)(Object(g.a)({},l),{},Object(x.a)({},n,a)))},className:"type-form",children:function(e){var t,a;switch(e){case"text":case"number":case"bool":return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Parsable answer"}),Object(m.jsx)("input",{name:"target",value:l.target})]});case"select":return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Option"}),Object(m.jsxs)("select",{name:"target",value:l.target,placeholder:"Option",children:[Object(m.jsx)("option",{children:"Choose"}),null===n||void 0===n||null===(t=n.options)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)("option",{value:e.value,children:e["optionLabel_".concat(c)]},e.value)}))]})]});case"multi-select":return Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Option"}),Object(m.jsxs)("select",{name:"target",value:l.target,placeholder:"Option",children:[Object(m.jsx)("option",{children:"Choose"}),null===n||void 0===n||null===(a=n.options)||void 0===a?void 0:a.map((function(e){return Object(m.jsx)("option",{value:e.value,children:e["optionLabel_".concat(c)]},e.value)}))]})]});default:return Object(m.jsx)(m.Fragment,{})}}(s)})}function me(e){var t,n,c,i,s,o=e.form,l=void 0===o?{}:o,d=e.dataElement,u=void 0===d?{}:d,j=e.onChange,b=void 0===j?function(){}:j,p=Object(r.d)((function(e){return e.default})),O=p.languages,v=p.registers,h=Object(a.useState)(null),f=Object(M.a)(h,2),x=f[0],y=f[1],N=v.find((function(e){return e.code===u.register})),C=Object(a.useState)(null===N||void 0===N||null===(t=N.inputs)||void 0===t?void 0:t.find((function(e){return e.key===(null===l||void 0===l?void 0:l.questionKey)}))),k=Object(M.a)(C,2),S=k[0],w=k[1];return Object(m.jsxs)("div",{className:"aggregation-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Language"}),Object(m.jsxs)("select",{onChange:function(e){e.stopPropagation(),y(e.target.value)},children:[Object(m.jsx)("option",{children:"Choose"}),O.map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.name},e.code)}))]})]}),x&&N?Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsxs)("label",{children:["Path ",null!==l&&void 0!==l&&null!==(n=l.path)&&void 0!==n&&n.path?"(".concat(null===l||void 0===l||null===(c=l.path)||void 0===c?void 0:c.path,")"):""]}),Object(m.jsxs)("select",{name:"questionKey",value:l.questionKey,placeholder:"Path",onChange:function(e){var t;w(null===N||void 0===N||null===(t=N.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value}))),b(Object(g.a)(Object(g.a)({},l),{},{questionKey:e.target.value}))},children:[Object(m.jsx)("option",{children:"Choose"}),null===N||void 0===N||null===(i=N.inputs)||void 0===i?void 0:i.filter((function(e){return"multi-input"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(x)]},e.key)}))]})]}):Object(m.jsx)(m.Fragment,{}),S&&x&&N?Object(m.jsx)(fe,{input:S,locale:x,path:null===l||void 0===l||null===(s=l.path)||void 0===s?void 0:s.obj[S.key],onNewInput:function(e){b(Object(g.a)(Object(g.a)({},l),{},{path:e}))}}):Object(m.jsx)(m.Fragment,{})]})}function fe(e){var t,n,c=e.input,i=void 0===c?{}:c,s=e.locale,o=void 0===s?"":s,l=e.onNewInput,r=void 0===l?function(){}:l,d=e.path,u=void 0===d?{}:d,j=Object.keys(null!==u&&void 0!==u?u:{}).length?Object.keys(u)[0]:null,b=Object(a.useState)(null===i||void 0===i||null===(t=i.inputs)||void 0===t?void 0:t.find((function(e){return e.key===j}))),p=Object(M.a)(b,2),O=p[0],v=p[1];return Object(m.jsxs)("div",{className:"lookup-div",children:[Object(m.jsx)("div",{className:"input-labeled",children:Object(m.jsxs)("select",{name:"questionKey",value:j,placeholder:"Question",onChange:function(e){var t;e.stopPropagation();var n=null===i||void 0===i||null===(t=i.inputs)||void 0===t?void 0:t.find((function(t){return t.key===e.target.value}));n&&(v(n),r({path:"".concat(i.key,"->").concat(n.key),obj:Object(x.a)({},i.key,Object(x.a)({},n.key,null))}))},children:[Object(m.jsx)("option",{children:"Choose"}),null===i||void 0===i||null===(n=i.inputs)||void 0===n?void 0:n.map((function(e){return Object(m.jsx)("option",{value:e.key,children:e["inputLabel_".concat(o)]},e.key)}))]})}),"multi-input"===(null===O||void 0===O?void 0:O.type)?Object(m.jsx)(fe,{input:O,locale:o,path:u[O.key],onNewInput:function(e){r({path:"".concat(i.key,"->").concat(e.path),obj:Object(x.a)({},i.key,e.obj)})}}):Object(m.jsx)(m.Fragment,{})]})}function xe(){var e=Object(a.useState)(null),t=Object(M.a)(e,2),n=t[0],c=t[1];return Object(m.jsxs)("div",{className:"oche-dhis2-datasets",children:[Object(m.jsx)(ge,{onTap:function(e){c(Object(g.a)({},e))}}),Object(m.jsx)(Ne,{dataSet:n},n)]})}function ge(e){var t=e.onTap,n=void 0===t?function(){}:t,c=Object(r.d)((function(e){return e.default})).dataSets,i=Object(a.useState)(""),s=Object(M.a)(i,2),o=s[0],l=s[1],d=c.filter((function(e){return String(e.name).toLowerCase().includes(String(o).toLowerCase())}));return d.sort((function(e,t){return e.name.localeCompare(t.name)})),Object(m.jsxs)("div",{className:"o-d-d o-d-d-v-d",children:[Object(m.jsxs)("p",{children:["Supported Datasets (",d.length,")"]}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("input",{placeholder:"Filter by name",onChange:function(e){var t=e.target.value;l(t)}}),Object(m.jsx)("div",{className:"s-dataset-list",children:d.map((function(e){var t=e.id,a=e.name,c=e.version,i=e.periodType,s=e.created;return Object(m.jsx)("div",{className:"s-datasetb",onClick:function(t){t.stopPropagation(),n(e)},children:Object(m.jsxs)("div",{className:"s-d-body",children:[Object(m.jsx)("p",{children:String(a).trim()}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("p",{children:["v",c," - ",i," -  ",new Date(s).toLocaleString()]})]})},t)}))})]})}function ye(){return(ye=Object(w.a)(Object(S.a)().mark((function e(t){var n,a,c,i,s,o,l,r,d;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=void 0===n?null:n,c=t.url,i=void 0===c?"":c,s=t.usrn,o=void 0===s?"":s,l=t.pwd,r=void 0===l?"":l,d="dataSets/".concat(a,"?fields=id,name,version,periodType,created,dataSetElements[dataElement[id,name,categoryCombo[id,name,categoryOptionCombos[id,name]]"),e.next=4,te({baseUrl:i,endPoint:d,method:"GET",mode:"no-cors",headers:{Authorization:"Basic ".concat(window.btoa("".concat(o,":").concat(r)))}}).then((function(e){return e.error?{}:e}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){var t,n,c,i=e.dataSet,s=void 0===i?null:i,o=null!==s&&void 0!==s?s:{},l=o.name,d=o.version,u=Object(r.d)((function(e){return e.default})).dhis2,j=Object(a.useState)({}),p=Object(M.a)(j,2),O=p[0],v=p[1],h=Object(a.useState)(!1),f=Object(M.a)(h,2),x=f[0],y=f[1],N=Object(r.d)((function(e){return e.default})).dataSets,C=Object(r.c)();Object(a.useEffect)((function(){v({})}),[s]);var k=null!==(t=null===O||void 0===O?void 0:O.dataSetElements)&&void 0!==t?t:[];k.sort((function(e,t){return e.dataElement.name.localeCompare(t.dataElement.name)}));var S=null!==(n=null===(c=N.find((function(e){return e.id===(null===s||void 0===s?void 0:s.id)})))||void 0===c?void 0:c.dataElements)&&void 0!==n?n:[];return s?Object(m.jsxs)("div",{className:"o-d-d",children:[Object(m.jsxs)("div",{className:"oche-inputs-title",children:[Object(m.jsxs)("p",{className:"p-medium",children:[l," v",d]}),Object(m.jsx)("i",{className:"fa fa-refresh ".concat(x?"fa-spin":""),onClick:function(e){var t=null!==u&&void 0!==u?u:{},n=t.baseUrl,a=t.username,c=t.password;y(!0),function(e){return ye.apply(this,arguments)}({id:s.id,url:n,usrn:a,pwd:c}).then((function(e){y(!1),v(e)}))}})]}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("div",{className:"s-dataset-list",children:k.map((function(e){var t=e.dataElement,n=t.id,a=t.name,c=S.find((function(e){return e.id===n}));return Object(m.jsx)(q,{title:a,data:Object(m.jsx)(Ce,{dataElement:null!==c&&void 0!==c?c:e.dataElement,onChange:function(e){C(b({dataSets:Object(D.a)(N).map((function(t){return t.id===s.id?Object(g.a)(Object(g.a)({},s),{},{dataElements:[].concat(Object(D.a)(S.filter((function(t){return t.id!==e.id}))),[Object(g.a)({},e)])}):t}))}))}})},n)}))})]}):Object(m.jsx)("p",{className:"o-d-d center-o-o-d",children:"Select a DHIS2 dataset to continue"})}function Ce(e){var t=e.dataElement,n=void 0===t?{}:t,a=e.onChange,c=void 0===a?function(){}:a,i=Object(r.d)((function(e){return e.default})),s=i.registers,o=i.languages,l=n.categoryCombo,d=l.name,u=l.categoryOptionCombos,j=null!==u&&void 0!==u?u:[],b=Object(D.a)(j);return b.sort((function(e,t){return e.name.localeCompare(t.name)})),Object(m.jsxs)("div",{className:"categoryCombo",children:[Object(m.jsxs)("div",{className:"categoryCombo-left",children:[Object(m.jsx)("p",{id:"combName",children:d}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Register"}),Object(m.jsxs)("select",{name:"register",value:null===n||void 0===n?void 0:n.register,onChange:function(e){e.stopPropagation(),c(Object(g.a)(Object(g.a)({},n),{},{register:e.target.value}))},children:[Object(m.jsx)("option",{value:"",children:"Choose"}),Object(D.a)(s).map((function(e){return Object(m.jsx)("option",{value:e.code,children:e.code})}))]})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Display name"}),Object(D.a)(o).map((function(e,t){var a="displayName_".concat(e.code);return Object(m.jsx)("input",{name:a,placeholder:"Display name (".concat(e.name,")"),type:"name",value:n[a],onChange:function(e){e.stopPropagation(),c(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},a,e.target.value)))}},t)}))]})]}),Object(m.jsx)("div",{className:"s-dataset-list",children:null===b||void 0===b?void 0:b.map((function(e){var t=e.id,a=e.name;return Object(m.jsx)(q,{title:a,data:Object(m.jsx)(ke,{categoryOptionCombo:e,dataElement:n,onChange:function(e){c(Object(g.a)(Object(g.a)({},n),{},{categoryCombo:Object(g.a)(Object(g.a)({},n.categoryCombo),{},{categoryOptionCombos:b.map((function(t){return t.id===e.id?Object(g.a)(Object(g.a)({},t),e):t}))})}))}})},t)}))})]})}function ke(e){var t,n=e.categoryOptionCombo,a=void 0===n?{}:n,c=e.dataElement,i=void 0===c?{}:c,s=e.onChange,o=void 0===s?function(){}:s,l=Object(r.d)((function(e){return e.default})).languages;return Object(m.jsxs)("div",{className:"categoryComboConfig",children:[Object(m.jsxs)("div",{className:"oche-languages-form",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"DataElement"}),Object(m.jsx)("input",{className:"input-disable",type:"text",placeholder:"DataElement",value:i.id})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"CategoryOptionCombo"}),Object(m.jsx)("input",{className:"input-disable",type:"text",placeholder:"CategoryOptionCombo",value:a.id})]})]}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Display name"}),Object(m.jsx)("div",{className:"oche-languages-form",children:Object(D.a)(l).map((function(e,t){var n="displayName_".concat(e.code);return Object(m.jsx)("input",{name:n,placeholder:"Display name (".concat(e.name,")"),type:"name",value:a[n],onChange:function(e){e.stopPropagation(),o(Object(g.a)(Object(g.a)({},a),{},Object(x.a)({},n,e.target.value)))}},t)}))})]}),Object(m.jsx)(q,{title:"Aggregation conditions",data:Object(m.jsx)(Se,{conditions:null!==(t=null===a||void 0===a?void 0:a.aggregationConditions)&&void 0!==t?t:[],dataElement:i,onChange:function(e){o(Object(g.a)(Object(g.a)({},a),{},{aggregationConditions:e}))}})})]})}function Se(e){var t=e.conditions,n=void 0===t?[]:t,a=e.onChange,c=void 0===a?function(){}:a,i=e.dataElement,s=void 0===i?{}:i;return Object(m.jsxs)("div",{className:"aggregationconditions",children:[Object(m.jsxs)("div",{className:"oche-title",children:[Object(m.jsxs)("label",{children:["Conditions (",n.length,")"]}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),c([].concat(Object(D.a)(n),[P({currentList:n})]))},children:"Add"})]}),Object(m.jsx)("div",{className:"divider"}),n.map((function(e,t){var a;return Object(m.jsx)(q,{title:null!==(a=null===e||void 0===e?void 0:e.type)&&void 0!==a?a:"",data:Object(m.jsxs)("div",{className:"options-inputs-row",children:[Object(m.jsxs)("p",{children:[t+1,"."]}),Object(m.jsx)(we,{condition:e,dataElement:s,onChange:function(t){c(Object(D.a)(n.map((function(n){return n.id!==e.id?n:Object(g.a)(Object(g.a)({},n),t)}))))}}),Object(m.jsx)("i",{className:"modal-header fa fa-xmark",onClick:function(t){t.stopPropagation(),c(Object(D.a)(n.filter((function(t){return t.id!==e.id}))))}})]})},e.id)}))]})}function we(e){var t,n=e.condition,a=void 0===n?{}:n,c=e.onChange,i=void 0===c?function(){}:c,s=e.dataElement,o=void 0===s?{}:s;return Object(m.jsxs)("div",{className:"aggregationconfig",children:[Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"Type"}),Object(m.jsxs)("select",{name:"type",value:null===a||void 0===a?void 0:a.type,onChange:function(e){e.stopPropagation(),i(Object(g.a)(Object(g.a)({},a),{},{type:e.target.value,params:{}}))},children:[Object(m.jsx)("option",{value:"",children:"Choose"}),Object(m.jsx)("option",{value:"sex",children:"Sex"}),Object(m.jsx)("option",{value:"age",children:"Age"}),Object(m.jsx)("option",{value:"option",children:"Option"}),Object(m.jsx)("option",{value:"exact-answer",children:"Exact answer"}),Object(m.jsx)("option",{value:"sum-answer",children:"Sum of answer"}),Object(m.jsx)("option",{value:"exact-path",children:"Exact path"}),Object(m.jsx)("option",{value:"sum-exact-path",children:"Sum of exact path"})]})]}),Object(m.jsx)("div",{className:"input-labeled",children:Object(m.jsx)(Pe,{dataElement:o,type:null===a||void 0===a?void 0:a.type,form:null!==(t=null===a||void 0===a?void 0:a.params)&&void 0!==t?t:{},onChange:function(e){i(Object(g.a)(Object(g.a)({},a),{},{params:e}))}})}),Object(m.jsxs)("div",{className:"input-labeled",children:[Object(m.jsx)("label",{children:"OrElse"}),Object(m.jsx)(q,{title:"OrElse condition",data:Object(m.jsx)(we,{condition:a.orElse,dataElement:o,onChange:function(e){i(Object(g.a)(Object(g.a)({},a),{},{orElse:e}))}})})]})]})}function Pe(e){var t=e.type,n=void 0===t?void 0:t,a=e.form,c=void 0===a?{}:a,i=e.onChange,s=void 0===i?function(){}:i,o=e.dataElement,l=void 0===o?{}:o;switch(n){case"exact-path":return Object(m.jsx)(pe,{dataElement:l,form:c,onChange:function(e){s(Object(g.a)(Object(g.a)({},c),e))}});case"sum-exact-path":return Object(m.jsx)(me,{dataElement:l,form:c,onChange:function(e){s(Object(g.a)(Object(g.a)({},c),e))}});default:return Object(m.jsx)("form",{onChange:function(e){var t=e.target,n=t.name,a=t.value;s(Object(g.a)(Object(g.a)({},c),{},Object(x.a)({},n,a)))},className:"type-form",children:function(e){switch(e){case"sex":return Object(m.jsx)(re,{form:c});case"age":return Object(m.jsx)(de,{form:c});case"option":return Object(m.jsx)(ue,{form:c,dataElement:l});case"exact-answer":return Object(m.jsx)(je,{form:c,dataElement:l});case"sum-answer":return Object(m.jsx)(be,{form:c,dataElement:l});default:return Object(m.jsx)("p",{children:"Select a type"})}}(n)})}}var Le=function(e){Object(C.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={country:!1,languages:!1,registers:!1,forms:!1,dhis2Space:!1,dhis2DSpace:!1,uploading:!1},e}return Object(N.a)(n,[{key:"openCloseModal",value:function(e,t){this.setState(Object(g.a)(Object(g.a)({},this.state),{},Object(x.a)({},e,t)))}},{key:"_saveFile",value:function(e){var t=this,n=e.upload,a=void 0!==n&&n,c=this.props.storeObj;console.log(c);var i="OpenCarenet-".concat(c.name,"-v").concat(c.version),s=JSON.stringify(c,null,2),o=new Blob([s],{type:"application/json"});if(a)this.setState({uploading:!0}),o.name=i+".json",o.lastModified=new Date,L(new File([o],o.name,{type:o.type})).then((function(e){t.setState({uploading:!1})}));else{var l=URL.createObjectURL(o),r=document.createElement("a");r.href=l,r.download=i+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.country,a=t.languages,c=t.registers,i=t.forms,s=t.uploading,l=t.dhis2Space,r=t.dhis2DSpace;return Object(m.jsxs)("div",{className:"oche-home",children:[n&&Object(m.jsx)(E,{child:Object(m.jsx)(_,{}),onClose:function(){e.openCloseModal("country",!1)}}),a&&Object(m.jsx)(E,{child:Object(m.jsx)(ne,{}),onClose:function(){e.openCloseModal("languages",!1)}}),c&&Object(m.jsx)(E,{child:Object(m.jsx)(J,{}),onClose:function(){e.openCloseModal("registers",!1)}}),l&&Object(m.jsx)(E,{child:Object(m.jsx)(ie,{}),onClose:function(){e.openCloseModal("dhis2Space",!1)}}),r&&Object(m.jsx)(E,{child:Object(m.jsx)(xe,{}),onClose:function(){e.openCloseModal("dhis2DSpace",!1)}}),i&&Object(m.jsx)(E,{child:Object(m.jsx)($,{}),onClose:function(){e.openCloseModal("forms",!1)}}),Object(m.jsxs)("div",{className:"oche-home-save-actions",children:[Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("button",{children:"Home"})}),Object(m.jsx)("button",{onClick:function(t){t.stopPropagation(),e._saveFile({upload:!1})},children:"Save"}),Object(m.jsx)("button",{onClick:function(t){t.stopPropagation(),e._saveFile({upload:!0})},children:"Upload"}),s?Object(m.jsx)("i",{className:"fa fa-spinner fa-spin"}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsxs)("div",{className:"oche-home-actions",children:[Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("country",!0)},children:[Object(m.jsx)("i",{className:"c-red fa fa-earth-africa"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"Country"})]}),Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("languages",!0)},children:[Object(m.jsx)("i",{className:"c-red fa fa-language"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"Locales"})]})]}),Object(m.jsxs)("div",{className:"oche-home-actions",children:[Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("registers",!0)},children:[Object(m.jsx)("i",{className:"c-red fa fa-book"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"Registers"})]}),Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("forms",!0)},children:[Object(m.jsx)("i",{className:"c-red fa fa-clipboard-question"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"Forms"})]})]}),Object(m.jsxs)("div",{className:"oche-home-actions",children:[Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("dhis2Space",!0)},children:[Object(m.jsx)("img",{className:"c-red dash-img",src:ce,alt:"dhis2"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"DHIS2"})]}),Object(m.jsxs)("div",{className:"oche-home-single-home",onClick:function(){e.openCloseModal("dhis2DSpace",!0)},children:[Object(m.jsx)("img",{className:"c-red dash-img",src:ce,alt:"dhis2"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsx)("p",{children:"DHIS2 - DS"})]})]})]})}}]),n}(a.Component),Ee=Object(r.b)((function(e){return{name:e.default.name,version:e.default.version,languages:e.default.languages,registers:e.default.registers,provinces:e.default.provinces,dictionary:e.default.dictionary,copyright:e.default.copyright,storeObj:e.default}}))(Le);s.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(r.a,{store:v,children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",element:Object(m.jsx)(f,{})}),Object(m.jsx)(l.a,{path:"/session",element:Object(m.jsx)(Ee,{})}),Object(m.jsx)(l.a,{path:"*",element:Object(m.jsx)("div",{children:"Not found"})})]})})})})),console.log=function(){},console.error=function(){},console.debug=function(){}},47:function(e,t,n){},48:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){}},[[155,1,2]]]);
//# sourceMappingURL=main.acef2b1a.chunk.js.map